<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Casino Wheel</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0c0c1c, #1a1a3f);
      color: #fff;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    #loginScreen {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 20px;
    }

    #gameSection {
      display: none;
      text-align: center;
    }

    input[type="password"] {
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      margin-bottom: 10px;
      text-align: center;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 8px;
      background-color: #ffc107;
      color: #000;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #ffb300;
      transform: scale(1.05);
    }

    canvas {
      border-radius: 50%;
      box-shadow: 0 0 60px rgba(0, 255, 255, 0.4);
      margin-bottom: 20px;
    }

    .result {
      font-size: 24px;
      font-weight: bold;
      color: #00ffcc;
      text-shadow: 0 0 10px #00ffcc;
    }

    /* ‚úÖ MOBILE RESPONSIVE */
    @media (max-width: 768px) {
      canvas {
        width: 80vw;
        height: 80vw;
        max-width: 300px;
        max-height: 300px;
      }
      input[type="password"], button {
        width: 80%;
        max-width: 300px;
      }
      .result {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <!-- LOGIN SCREEN -->
  <div id="loginScreen">
    <h2>üîê Admin Login</h2>
    <input type="password" id="passwordInput" placeholder="Enter password" />
    <button onclick="checkPassword()">Login</button>
    <p id="errorMsg" style="color:red;"></p>
  </div>

  <!-- WHEEL GAME -->
  <div id="gameSection">
    <h2>üé° Spin Game (0‚Äì35)</h2>
    <canvas id="wheel" width="300" height="300"></canvas>
    <br>
    <button onclick="spinWheel()">Spin</button>
    <div class="result" id="spinResult"></div>
  </div>

  <script>
    // LOGIN CHECK
    function checkPassword() {
      const pwd = document.getElementById("passwordInput").value;
      if (pwd === "Darling") {
        document.getElementById("loginScreen").style.display = "none";
        document.getElementById("gameSection").style.display = "block";
      } else {
        document.getElementById("errorMsg").innerText = "‚ùå Wrong password!";
      }
    }

    // SPIN GAME CODE
    const segments = Array.from({ length: 36 }, (_, i) => i);
    const wheel = document.getElementById("wheel");
    const ctx = wheel.getContext("2d");
    const colors = segments.map((_, i) => `hsl(${(i * 360) / segments.length}, 100%, 60%)`);
    let spinning = false;
    let currentAngle = 0;

    function drawWheel(highlightIndex = -1) {
      const radius = wheel.width / 2;
      const arcSize = (2 * Math.PI) / segments.length;
      for (let i = 0; i < segments.length; i++) {
        const startAngle = i * arcSize;
        const endAngle = startAngle + arcSize;

        ctx.beginPath();
        ctx.moveTo(radius, radius);
        ctx.arc(radius, radius, radius, startAngle, endAngle);
        ctx.fillStyle = colors[i];
        ctx.fill();
        ctx.strokeStyle = "#222";
        ctx.stroke();

        ctx.save();
        ctx.translate(radius, radius);
        ctx.rotate(startAngle + arcSize / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = highlightIndex === i ? "#fff" : "#000";
        ctx.font = highlightIndex === i ? "bold 16px sans-serif" : "bold 12px sans-serif";
        ctx.fillText(segments[i], radius - 10, 5);
        ctx.restore();

        if (highlightIndex === i) {
          ctx.beginPath();
          ctx.arc(radius, radius, radius - 2, startAngle, endAngle);
          ctx.strokeStyle = "gold";
          ctx.lineWidth = 4;
          ctx.stroke();
        }
      }
    }

    function spinWheel() {
      if (spinning) return;
      spinning = true;
      document.getElementById("spinResult").innerText = "";

      const arcSize = 360 / segments.length;
      const winnerIndex = Math.floor(Math.random() * segments.length);
      const winnerAngle = 360 - (winnerIndex * arcSize + arcSize / 2);
      const randomOffset = Math.floor(Math.random() * 360);
      const totalRotation = 360 * 10 + winnerAngle + randomOffset;

      const duration = 8000;
      const start = performance.now();

      function animate(now) {
        const elapsed = now - start;
        const progress = Math.min(elapsed / duration, 1);
        const eased = easeOutBounce(progress);
        currentAngle = (totalRotation * eased) % 360;

        ctx.clearRect(0, 0, wheel.width, wheel.height);
        ctx.save();
        ctx.translate(wheel.width / 2, wheel.height / 2);
        ctx.rotate((currentAngle * Math.PI) / 180);
        ctx.translate(-wheel.width / 2, -wheel.height / 2);
        drawWheel();
        ctx.restore();

        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          spinning = false;
          showResult(currentAngle, randomOffset);
        }
      }

      requestAnimationFrame(animate);
    }

    function showResult(finalAngle, offset) {
      const arcSize = 360 / segments.length;
      let index = Math.floor((segments.length - ((finalAngle - offset + 360) % 360) / arcSize)) % segments.length;
      const winner = segments[index];
      document.getElementById("spinResult").innerText = `üéâ Spin Win: ${winner}`;
      ctx.clearRect(0, 0, wheel.width, wheel.height);
      ctx.save();
      ctx.translate(wheel.width / 2, wheel.height / 2);
      ctx.rotate((currentAngle * Math.PI) / 180);
      ctx.translate(-wheel.width / 2, -wheel.height / 2);
      drawWheel(index);
      ctx.restore();
    }

    function easeOutBounce(t) {
      const n1 = 7.5625, d1 = 2.75;
      if (t < 1 / d1) return n1 * t * t;
      if (t < 2 / d1) return n1 * (t -= 1.5 / d1) * t + 0.75;
      if (t < 2.5 / d1) return n1 * (t -= 2.25 / d1) * t + 0.9375;
      return n1 * (t -= 2.625 / d1) * t + 0.984375;
    }

    drawWheel();
  </script>
</body>
</html>
